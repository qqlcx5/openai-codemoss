# å¿«é€Ÿæ—¥å¿—æŸ¥çœ‹å‘½ä»¤

## ğŸš€ æœ€å¸¸ç”¨çš„å‘½ä»¤

### PM2 æ–¹å¼ï¼ˆæ¨èï¼‰

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
pm2 logs moss-proxy

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
pm2 logs moss-proxy --lines 100

# åªæŸ¥çœ‹é”™è¯¯
pm2 logs moss-proxy --err
```

### æ–‡ä»¶æ—¥å¿—æ–¹å¼

```bash
# å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/app.log

# å®æ—¶æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/error.log

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
tail -n 100 logs/app.log
```

## ğŸ“‹ å®Œæ•´å‘½ä»¤åˆ—è¡¨

### PM2 ç®¡ç†

```bash
# å¯åŠ¨ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶ï¼‰
npm run pm2:prod

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
npm run pm2:logs
# æˆ–
pm2 logs moss-proxy

# é‡å¯
npm run pm2:restart

# åœæ­¢
npm run pm2:stop

# åˆ é™¤
npm run pm2:delete
```

### æ–‡ä»¶æ—¥å¿—æŸ¥çœ‹

```bash
# å®æ—¶æŸ¥çœ‹
tail -f logs/app.log
tail -f logs/error.log

# æŸ¥çœ‹å†å²
cat logs/app.log
less logs/app.log

# æœç´¢
grep "ERROR" logs/app.log
grep "Request completed" logs/app.log

# ç»Ÿè®¡
wc -l logs/app.log  # æ€»è¡Œæ•°
grep "ERROR" logs/error.log | wc -l  # é”™è¯¯æ•°é‡
```

## ğŸ” å¸¸ç”¨åœºæ™¯

### æŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£å¸¸

```bash
pm2 status moss-proxy
tail -n 20 logs/app.log
```

### æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯

```bash
tail -n 50 logs/error.log
# æˆ–
pm2 logs moss-proxy --err --lines 20
```

### æŸ¥çœ‹APIè¯·æ±‚æƒ…å†µ

```bash
grep "Request completed" logs/app.log | tail -n 20
```

### æŸ¥çœ‹ç‰¹å®šæ—¶é—´çš„æ—¥å¿—

```bash
# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
grep "$(date +%Y-%m-%d)" logs/app.log

# æŸ¥çœ‹ç‰¹å®šæ—¥æœŸ
grep "2024-01-01" logs/app.log
```

## ğŸ“ æ—¥å¿—æ–‡ä»¶ä½ç½®

- **åº”ç”¨æ—¥å¿—**: `logs/app-YYYY-MM-DD.log`
- **é”™è¯¯æ—¥å¿—**: `logs/error-YYYY-MM-DD.log`
- **PM2æ—¥å¿—**: `logs/pm2-out.log` å’Œ `logs/pm2-error.log`

## ğŸ’¡ æç¤º

1. æ—¥å¿—æ–‡ä»¶ä¼šè‡ªåŠ¨æŒ‰å¤©è½®è½¬
2. 7å¤©å‰çš„æ—¥å¿—ä¼šè‡ªåŠ¨æ¸…ç†
3. æ—¥å¿—åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶
4. ä½¿ç”¨ `Ctrl+C` é€€å‡ºå®æ—¶æŸ¥çœ‹
